FROM alpine:latest AS base

# Instala paquetes necesarios
RUN apk add --no-cache bash curl openrc docker-cli tzdata

#Establece zona horaria
ENV TZ=Europe/Madrid
RUN cp /usr/share/zoneinfo/Europe/Madrid /etc/localtime

# Copia el script a la ruta del contenedor
COPY ["Scheduler/scheduler_init.sh", "/app/scheduler_init.sh"]

# Da permisos de ejecuci√≥n al script
RUN chmod +x /app/scheduler_init.sh

# Copia el archivo de crontab al contenedor
COPY ["Scheduler/crontab", "/etc/crontabs/root"]

# Comando para iniciar cron en primer plano
ENTRYPOINT ["crond", "-f"]